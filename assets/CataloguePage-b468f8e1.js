import{u as I,r as s,j as e,a as O,f as V,C as q}from"./index-5d43bff1.js";import{u as A,F as U,I as W,a as C,L as f,M as $,b as z,A as L,c as P,d as G,e as H,f as J,P as K,g as Q,h as X,i as Y,j as Z,k as _,l as ee,m as te,S as w,n as se,C as ae,s as re}from"./Search.style-5b2c50d6.js";import"./RentalCarBtn.styled-4a423d75.js";const ne=({adverts:a,updateFilteredAdverts:o})=>{const r=I(t=>t.filter.filter),c=A(),[n,d]=s.useState(!1),[i,g]=s.useState(""),[F,E]=s.useState([]),[u,x]=s.useState(""),[p,M]=s.useState(""),[h,S]=s.useState("");s.useState([]),s.useState(!1);const T=()=>{const t=a.map(j=>j.make),l=[...new Set(t)];E(l)};s.useEffect(()=>{T()},[a]);const D=30,v=500,R=10,k=[];for(let t=D;t<=v;t+=R)k.push(t);const y=async()=>{console.log(a),console.log(r);const t=a.filter(l=>{if(console.log("ADVERT CARS:",l.make),console.log("FILTER CARS:",r.model),i&&r.model&&!l.make.toLowerCase().includes(r.model.toLowerCase()))return!1;if(u&&!isNaN(u)&&parseFloat(l.price)===parseFloat(r.price))return!0;if(p!==""&&h!==""){const j=Number(p),N=Number(h);if(j<N)return!0}return!0});c(O({model:i,price:u,startMileage:p,endMileage:h})),o(t),console.log("FilteredAdverts",t)},b=t=>{d(n===t?null:t)},B=()=>{g(""),x(""),M(""),S(""),o(a)},m=t=>{switch(t.target.name){case"model":g(t.target.value);break;case"price":x(t.target.value);break;case"endMileage":S(t.target.value);break;case"startMileage":M(t.target.value);default:return}n||d(!0)};return e.jsx(U,{children:e.jsxs(W,{children:[e.jsxs(C,{children:[e.jsx(f,{htmlFor:"modelTitle",children:"Car brand"}),e.jsx($,{id:"modelTitle",name:"model",placeholder:"Enter the text",value:i,onChange:m}),e.jsx(z,{onClick:()=>b("model"),type:"button",children:n==="model"?e.jsx(L,{}):e.jsx(P,{})}),n==="model"&&e.jsx(G,{children:e.jsx(H,{children:F.filter(t=>t.toLowerCase().includes(i.toLowerCase())).map((t,l)=>e.jsx(J,{onClick:()=>g(t),children:t},l))})})]}),e.jsxs(C,{children:[e.jsx(f,{htmlFor:"priceTitle",children:"Price/ 1 hour "}),e.jsx(K,{id:"priceTitle",name:"price",placeholder:"To $",value:u,onChange:m}),e.jsx(Q,{type:"button",onClick:()=>b("price"),children:n==="price"?e.jsx(L,{}):e.jsx(P,{})}),n==="price"&&e.jsx(X,{children:e.jsx(Y,{children:k.map((t,l)=>e.jsx(Z,{onClick:()=>x(t),children:t},l))})})]}),e.jsxs(C,{children:[e.jsx(f,{htmlFor:"mileageTitle",children:"Ð¡ar mileage / km "}),e.jsxs(_,{children:[e.jsx(ee,{id:"mileageTitle",name:"startMileage",placeholder:"from",value:p,onChange:m}),e.jsx(te,{type:"number",name:"endMileage",placeholder:"to",value:h,onChange:m})]})]}),e.jsx(w,{type:"button",onClick:y,children:"Search"}),e.jsx(w,{type:"button",onClick:B,children:"Reset"})]})})},le=({adverts:a})=>{const[o,r]=s.useState(1),c=12,n=()=>{r(o+1)},d=c*o;return e.jsxs(e.Fragment,{children:[e.jsx(se,{children:a.slice(0,o*c).map(i=>e.jsx(ae,{advert:i},i.id))}),a.length>d&&e.jsx("button",{onClick:n,children:"LOAD MORE"})]})},de=()=>{const a=I(re),o=A(),[r,c]=s.useState([]);s.useEffect(()=>{o(V())},[o]);const n=d=>{c(d)};return e.jsx(e.Fragment,{children:e.jsxs(q,{children:[e.jsx(ne,{adverts:a,updateFilteredAdverts:n}),e.jsx(le,{adverts:r.length>0?r:a})]})})};export{de as default};
